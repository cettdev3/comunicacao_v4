{% load static %}
{% load static %}
<!DOCTYPE html>
<html lang="en">

    
<!-- Mirrored from coderthemes.com/jidox/layouts/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 16 Nov 2023 12:12:10 GMT -->
<head>
        <meta charset="utf-8" />
        <title>MaestroCom</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta content="A fully featured admin theme which can be used to build CRM, CMS, etc." name="description" />
        <meta content="Coderthemes" name="author" />

        <!-- App favicon -->
        <link rel="shortcut icon" href="{% static 'layouts/assets/images/favicon.ico' %}">

        <!-- Datatables css -->
        <link href="{% static 'layouts/assets/vendor/datatables.net-bs5/css/dataTables.bootstrap5.min.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'layouts/assets/vendor/datatables.net-responsive-bs5/css/responsive.bootstrap5.min.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'layouts/assets/vendor/datatables.net-fixedcolumns-bs5/css/fixedColumns.bootstrap5.min.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'layouts/assets/vendor/datatables.net-fixedheader-bs5/css/fixedHeader.bootstrap5.min.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'layouts/assets/vendor/datatables.net-buttons-bs5/css/buttons.bootstrap5.min.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'layouts/assets/vendor/datatables.net-select-bs5/css/select.bootstrap5.min.css' %}" rel="stylesheet" type="text/css" />
        


        <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
        <!-- Daterangepicker css -->
        <link rel="stylesheet" href="{% static 'layouts/assets/vendor/daterangepicker/daterangepicker.css' %}">

        <!-- Vector Map css -->
        <link rel="stylesheet" href="{% static 'layouts/assets/vendor/admin-resources/jquery.vectormap/jquery-jvectormap-1.2.2.css' %}">

        <!-- Theme Config Js -->
        <script src="{% static 'layouts/assets/js/config.js' %}"></script>

        <!-- App css -->
        <link href="{% static 'layouts/assets/css/app.min.css' %}" rel="stylesheet" type="text/css" id="app-style" />

        <!-- Icons css -->
        <link href="{% static 'layouts/assets/css/icons.min.css' %}" rel="stylesheet" type="text/css" />
		
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/3.5.0/remixicon.min.css" integrity="sha512-/VYneElp5u4puMaIp/4ibGxlTd2MV3kuUIroR3NSQjS2h9XKQNebRQiyyoQKeiGE9mRdjSCIZf9pb7AVJ8DhCg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
		
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/3.5.0/remixicon.css" integrity="sha512-HXXR0l2yMwHDrDyxJbrMD9eLvPe3z3qL3PPeozNTsiHJEENxx8DH2CxmV05iwG0dwoz5n4gQZQyYLUNt1Wdgfg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
		
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.18/dist/sweetalert2.min.css">
    
    </head>

    <body>
        <!-- Begin page -->
        <div class="wrapper">


            <!-- ========== Topbar Start ========== -->
            <div class="navbar-custom">
                <div class="topbar container-fluid">
                    <div class="d-flex align-items-center gap-lg-2 gap-1">


                        <!-- Sidebar Menu Toggle Button -->
                        <button class="button-toggle-menu">
                            <i class="ri-menu-2-fill"></i>
                        </button>

                        <!-- Horizontal Menu Toggle Button -->
                        <button class="navbar-toggle" data-bs-toggle="collapse" data-bs-target="#topnav-menu-content">
                            <div class="lines">
                                <span></span>
                                <span></span>
                                <span></span>
                            </div>
                        </button>

                        <!-- Topbar Search Form -->
                        <div class="app-search dropdown d-none d-lg-block">
                            <form>
                              
                            </form>

                            <div class="dropdown-menu dropdown-menu-animated dropdown-lg" id="search-dropdown">
                                <!-- item-->
                                <div class="dropdown-header noti-title">
                                    <h5 class="text-overflow mb-1">Found <b class="text-decoration-underline">08</b> results</h5>
                                </div>

                                <!-- item-->
                                <a href="javascript:void(0);" class="dropdown-item notify-item">
                                    <i class="ri-file-chart-line fs-16 me-1"></i>
                                    <span>Analytics Report</span>
                                </a>

                                <!-- item-->
                                <a href="javascript:void(0);" class="dropdown-item notify-item">
                                    <i class="ri-lifebuoy-line fs-16 me-1"></i>
                                    <span>How can I help you?</span>
                                </a>

                                <!-- item-->
                                <a href="javascript:void(0);" class="dropdown-item notify-item">
                                    <i class="ri-user-settings-line fs-16 me-1"></i>
                                    <span>User profile settings</span>
                                </a>

                                <!-- item-->
                                <div class="dropdown-header noti-title">
                                    <h6 class="text-overflow mt-2 mb-1 text-uppercase">Users</h6>
                                </div>

                                <div class="notification-list">
                                    <!-- item-->
                                    <a href="javascript:void(0);" class="dropdown-item notify-item">
                                        <div class="d-flex">
                                            <img class="d-flex me-2 rounded-circle" src="{% static 'layouts/assets/images/users/avatar-2.jpg' %}" alt="Generic placeholder image" height="32">
                                            <div class="w-100">
                                                <h5 class="m-0 fs-14">Erwin Brown</h5>
                                                <span class="fs-12 mb-0">UI Designer</span>
                                            </div>
                                        </div>
                                    </a>

                                    <!-- item-->
                                    <a href="javascript:void(0);" class="dropdown-item notify-item">
                                        <div class="d-flex">
                                            <img class="d-flex me-2 rounded-circle" src="{% static 'layouts/assets/images/users/avatar-5.jpg' %}" alt="Generic placeholder image" height="32">
                                            <div class="w-100">
                                                <h5 class="m-0 fs-14">Jacob Deo</h5>
                                                <span class="fs-12 mb-0">Developer</span>
                                            </div>
                                        </div>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <ul class="topbar-menu d-flex align-items-center gap-3">
                        <li class="dropdown d-lg-none">
                            <a class="nav-link dropdown-toggle arrow-none" data-bs-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
                                <i class="ri-search-line fs-22"></i>
                            </a>
                            <div class="dropdown-menu dropdown-menu-end dropdown-menu-animated dropdown-lg p-0">
                                <form class="p-3">
                                    <input type="search" class="form-control" placeholder="Search ..." aria-label="Recipient's username">
                                </form>
                            </div>
                        </li>

       

                        <li class="dropdown notification-list">
                            <a class="nav-link dropdown-toggle arrow-none" data-bs-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
                                <i class="ri-notification-3-fill fs-22"></i>
                                <span class="noti-icon-badge"></span>
                            </a>
                            <div class="dropdown-menu dropdown-menu-end dropdown-menu-animated dropdown-lg py-0">
                                <div class="p-2 border-top-0 border-start-0 border-end-0 border-dashed border">
                                    <div class="row align-items-center">
                                        <div class="col">
                                            <h6 class="m-0 fs-16 fw-medium"> Notification</h6>
                                        </div>
                                        <div class="col-auto">
                                            <a href="javascript: void(0);" class="text-dark text-decoration-underline">
                                                <small>Clear All</small>
                                            </a>
                                        </div>
                                    </div>
                                </div>

                                <div style="max-height: 300px;" data-simplebar>

                                    <h5 class="text-muted fs-12 fw-bold p-2 text-uppercase mb-0">Today</h5>
                                    <!-- item-->

                                    <a href="javascript:void(0);" class="dropdown-item p-0 notify-item unread-noti card m-0 shadow-none">
                                        <div class="card-body">
                                            <div class="d-flex align-items-center">
                                                <div class="flex-shrink-0">
                                                    <div class="notify-icon bg-primary">
                                                        <i class="ri-message-3-line fs-18"></i>
                                                    </div>
                                                </div>
                                                <div class="flex-grow-1 text-truncate ms-2">
                                                    <h5 class="noti-item-title fw-medium fs-14">Datacorp <small class="fw-normal text-muted float-end ms-1">1 min ago</small></h5>
                                                    <small class="noti-item-subtitle text-muted">Caleb Flakelar commented on Admin</small>
                                                </div>
                                            </div>
                                        </div>
                                    </a>

                                    <!-- item-->
                                    <a href="javascript:void(0);" class="dropdown-item p-0 notify-item read-noti card m-0 shadow-none">
                                        <div class="card-body">
                                            <div class="d-flex align-items-center">
                                                <div class="flex-shrink-0">
                                                    <div class="notify-icon bg-info">
                                                        <i class="ri-user-add-line fs-18"></i>
                                                    </div>
                                                </div>
                                                <div class="flex-grow-1 text-truncate ms-2">
                                                    <h5 class="noti-item-title fw-medium fs-14">Admin <small class="fw-normal text-muted float-end ms-1">1 hr ago</small></h5>
                                                    <small class="noti-item-subtitle text-muted">New user registered</small>
                                                </div>
                                            </div>
                                        </div>
                                    </a>

                                    <h5 class="text-muted fs-12 fw-bold p-2 mb-0 text-uppercase">Yesterday</h5>

                                    <!-- item-->
                                    <a href="javascript:void(0);" class="dropdown-item p-0 notify-item read-noti card m-0 shadow-none">
                                        <div class="card-body">
                                            <div class="d-flex align-items-center">
                                                <div class="flex-shrink-0">
                                                    <div class="notify-icon">
                                                        <img src="{% static 'layouts/assets/images/users/avatar-2.jpg' %}" class="img-fluid rounded-circle" alt="" />
                                                    </div>
                                                </div>
                                                <div class="flex-grow-1 text-truncate ms-2">
                                                    <h5 class="noti-item-title fw-medium fs-14">Cristina Pride <small class="fw-normal text-muted float-end ms-1">1 day ago</small></h5>
                                                    <small class="noti-item-subtitle text-muted">Hi, How are you? What about our next meeting</small>
                                                </div>
                                            </div>
                                        </div>
                                    </a>

                                    <h5 class="text-muted fs-12 fw-bold p-2 mb-0 text-uppercase">31 Jan 2023</h5>

                                    <!-- item-->
                                    <a href="javascript:void(0);" class="dropdown-item p-0 notify-item read-noti card m-0 shadow-none">
                                        <div class="card-body">
                                            <div class="d-flex align-items-center">
                                                <div class="flex-shrink-0">
                                                    <div class="notify-icon bg-primary">
                                                        <i class="ri-discuss-line fs-18"></i>
                                                    </div>
                                                </div>
                                                <div class="flex-grow-1 text-truncate ms-2">
                                                    <h5 class="noti-item-title fw-medium fs-14">Datacorp</h5>
                                                    <small class="noti-item-subtitle text-muted">Caleb Flakelar commented on Admin</small>
                                                </div>
                                            </div>
                                        </div>
                                    </a>

                                    <!-- item-->
                                    <a href="javascript:void(0);" class="dropdown-item p-0 notify-item read-noti card m-0 shadow-none">
                                        <div class="card-body">
                                            <div class="d-flex align-items-center">
                                                <div class="flex-shrink-0">
                                                    <div class="notify-icon">
                                                        <img src="{% static 'layouts/assets/images/users/avatar-4.jpg' %}" class="img-fluid rounded-circle" alt="" />
                                                    </div>
                                                </div>
                                                <div class="flex-grow-1 text-truncate ms-2">
                                                    <h5 class="noti-item-title fw-medium fs-14">Karen Robinson</h5>
                                                    <small class="noti-item-subtitle text-muted">Wow ! this admin looks good and awesome design</small>
                                                </div>
                                            </div>
                                        </div>
                                    </a>
                                </div>

                          
                            </div>
                        </li>

                  

                     

                        <li class="d-none d-sm-inline-block">
                            <div class="nav-link" id="light-dark-mode">
                                <i class="ri-moon-fill fs-22"></i>
                            </div>
                        </li>



                        <li class="dropdown me-md-2">
                            <a class="nav-link dropdown-toggle arrow-none nav-user px-2" data-bs-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
                                <span class="account-user-avatar">
                                    {% if foto.foto %}
                                    <img src="{{foto.foto}}" id="avatar_topo" alt="user-image" width="42" height="42" class="rounded-circle">
                                    {% else %}
                                    <img src="https://ui-avatars.com/api/?name={{request.user.first_name}}&color=7F9CF5&background=EBF4FF" id="avatar_topo" alt="user-image" width="42" height="42" class="rounded-circle">
                                    {% endif %}
                                </span>
                                <span class="d-lg-flex flex-column gap-1 d-none">
                                    <h5 class="my-0">{{request.user.first_name}}</h5>
                                    <h6 class="my-0 fw-normal">{{foto.get_cargo_display}}</h6>
                                </span>
                            </a>
                            <div class="dropdown-menu dropdown-menu-end dropdown-menu-animated profile-dropdown">
                                
                                <a data-bs-toggle="modal" data-bs-target="#standard-modal" href="#" class="dropdown-item">
                                    <i class="ri-settings-3-fill me-1"></i>
                                    <span>Alterar Foto</span>
                                </a>

                                <!-- item-->
                                <a href="/logout" class="dropdown-item">
                                    <i class="ri-logout-box-fill align-middle me-1"></i>
                                    <span>Logout</span>
                                </a>
                                
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
            <!-- ========== Topbar End ========== -->

            <!-- ========== Left Sidebar Start ========== -->
            <div class="leftside-menu">

                <!-- Brand Logo Light -->
                <a href="/dashboard" class="logo logo-light">
                    <span class="logo-lg">
                        <img src="{% static 'logo_cett_branco.png' %}" alt="logo">
                    </span>
                    <span class="logo-sm">
                        <img src="{% static 'icon_cett_branco.png' %}" alt="small logo">
                    </span>
                </a>

                <!-- Brand Logo Dark -->
                <a href="/dashboard" class="logo logo-dark">
                    <span class="logo-lg">
                        <img src="{% static 'logo_cett.png' %}" alt="dark logo">
                    </span>
                    <span class="logo-sm">
                        <img src="{% static 'icon.png' %}" alt="small logo">
                    </span>
                </a>

                <!-- Sidebar Hover Menu Toggle Button -->
                <div class="button-sm-hover" data-bs-toggle="tooltip" data-bs-placement="right" title="Show Full Sidebar">
                    <i class="ri-checkbox-blank-circle-line align-middle"></i>
                </div>

                <!-- Full Sidebar Menu Close Button -->
                <div class="button-close-fullsidebar">
                    <i class="ri-close-fill align-middle"></i>
                </div>

                <!-- Sidebar -left -->
                <div class="h-100" id="leftside-menu-container" data-simplebar>
                    <!-- Leftbar User -->
                    <div class="leftbar-user p-3 text-white">
                        <a href="/dashboard" class="d-flex align-items-center text-reset">
                            <div class="flex-shrink-0">
                                {% if foto.foto %}
                                <img src="{{foto.foto}}" id="avatar_topo" alt="user-image" width="42" height="42" class="rounded-circle">
                                {% else %}
                                <img src="https://ui-avatars.com/api/?name={{request.user.first_name}}&color=7F9CF5&background=EBF4FF" id="avatar_topo" alt="user-image" width="42" height="42" class="rounded-circle">
                                {% endif %}
                            </div>
                            <div class="flex-grow-1 ms-2">
                                <span class="fw-semibold fs-15 d-block">{{request.user.first_name}}</span>
                                <span class="fs-13">{{foto.get_cargo_display}}</span>
                            </div>
                           
                        </a>
                    </div>

                    <!--- Sidemenu -->
                    <ul class="side-nav">

                        <li class="side-nav-title mt-1"> Main</li>

                        <li class="side-nav-item">
                            <a href="/dashboard" class="side-nav-link">
                                <i class="ri-dashboard-2-fill"></i>
                                <span> Dashboard </span>
                            </a>
                        </li>

                        <li class="side-nav-item">
                            <a href="/solicitacoes" class="side-nav-link">
                                <i class="ri-draft-fill"></i>
                                <span> Solicitações </span>
                            </a>
                        </li>

                        <li class="side-nav-item">
                            <a href="/meus-jobs" class="side-nav-link">
                                <i class="ri-list-check-3"></i> 
                                <span> Meus Jobs {{solicitacao.perfil.cargo}}</span>
                            </a>
                        </li>
                        {% if perm < 3 %}

                     

                        <li class="side-nav-item">
                            <a href="/all-demands" class="side-nav-link">
                                <i class="ri-todo-line"></i>
                                <span> Todas as Demandas </span>
                            </a>
                        </li>
                        
                        <li class="side-nav-item">
                            <a href="/all-jobs" class="side-nav-link">
                                <i class="ri-todo-line"></i>
                                <span> Todos os Jobs </span>
                            </a>
                        </li>
                       
                        <li class="side-nav-item">
                          <a href="/gerir-time" class="side-nav-link">
                              <i class="ri-group-2-line"></i>
                              <span> Gerir Time </span>
                          </a>
                      </li>
                      {% endif %}



                    </ul>
                    <!--- End Sidemenu -->

                    <div class="clearfix"></div>
                </div>
            </div>
            <!-- ========== Left Sidebar End ========== -->
            {% block content %}

            {% endblock %}
        

        </div>
        <!-- END wrapper -->

        <div id="standard-modal" class="modal fade" tabindex="-1" aria-labelledby="standard-modalLabel" style="display: none;" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title" id="standard-modalLabel">Configurações</h4>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <form id="form_foto" method="POST"  enctype="multipart/form-data">
                        {% csrf_token %}
                    <div class="modal-body">
                        <div class="col-12">
                            <div class="mb-3">
                                <label for="simpleinput" class="form-label">Foto: </label>
                                <input type="file" id="foto_input"  name="foto_input" class="form-control">
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-light" data-bs-dismiss="modal">Fechar</button>
                        <button type="button" onclick="alterar_foto()" class="btn btn-primary">Atualizar Foto</button>
                    </div>
                    </form>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div>

        
        
        <!-- Vendor js -->
        <script src="{% static 'layouts/assets/js/vendor.min.js' %}"></script>

         <!-- Datatables js -->
         <script src="{% static 'layouts/assets/vendor/datatables.net/js/jquery.dataTables.min.js' %}"></script>
         <script src="{% static 'layouts/assets/vendor/datatables.net-bs5/js/dataTables.bootstrap5.min.js' %}"></script>
         <script src="{% static 'layouts/assets/vendor/datatables.net-responsive/js/dataTables.responsive.min.js' %}"></script>
         <script src="{% static 'layouts/assets/vendor/datatables.net-responsive-bs5/js/responsive.bootstrap5.min.js' %}"></script>
         <script src="{% static 'layouts/assets/vendor/datatables.net-fixedcolumns-bs5/js/fixedColumns.bootstrap5.min.js' %}"></script>
         <!-- <script src="{% static 'layouts/assets/vendor/datatables.net-fixedheader/js/dataTables.fixedHeader.min.js' %}"></script> -->
         <script src="{% static 'layouts/assets/vendor/datatables.net-buttons/js/dataTables.buttons.min.js' %}"></script>
         
 
         <!-- Datatable Demo Aapp js -->
         <script src="{% static 'layouts/assets/js/pages/demo.datatable-init.js' %}"></script>
        
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.18/dist/sweetalert2.min.js"></script>

        <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

        <script>
            $(document).ready(function() {
          $("#select2_peca").select2({
            dropdownParent: $("#task-detail-modal")
          });
          $("#select2_usuario").select2({
            dropdownParent: $("#task-detail-modal")
          });
          
        });
        </script>

        <!-- Daterangepicker js -->
        <script src="{% static 'layouts/assets/vendor/daterangepicker/moment.min.js' %}"></script>
        <script src="{% static 'layouts/assets/vendor/daterangepicker/daterangepicker.js' %}"></script>

        <script src="{% static 'layouts/assets/vendor/jquery-mask-plugin/jquery.mask.min.js' %}"></script>

    
         
         <script src="{% static 'layouts/assets/vendor/quill/quill.min.js' %}"></script>

         

        <!-- App js -->
        <script src="{% static 'layouts/assets/js/app.min.js' %}"></script>

        <link href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.css" rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.js"></script>

            
        
    </body>
<script>

    function alterar_foto(){
        var XCSRFToken = '{{ csrf_token }}';
        var form = document.getElementById("form_foto");
        var formData = new FormData(form);  // Use FormData para incluir campos de arquivo]

        var fileInput = document.getElementById('foto_input');
        
        if (fileInput){
        for (var i = 0; i < fileInput.files.length; i++) {
            console.log(fileInput.files[i])
            formData.append('files[]', fileInput.files[i]);
        }
        }

        console.log(formData)
        const url = '/ajax/atualizar-foto';

        $.ajax({
            url,
            type: 'POST',
            data: formData,
            headers: { "X-CSRFToken": XCSRFToken },
            processData: false,  // Não processar os dados (o FormData já cuida disso)
            contentType: false,  // Não definir o tipo de conteúdo (o FormData já cuida disso),
            success: function(data) {
                Swal.fire({
                    icon: 'success',
                    title: 'Sucesso!',
                    text: 'Alteração realizada com sucesso!'
                });
                
            },
            error: function(xhr, status, error) {
                Swal.fire({
                    icon: 'error',
                    title: 'Ops!',
                    text: 'Não foi possível obter resultados!'
                });
            }
        });
    }
</script>
<!-- Mirrored from coderthemes.com/jidox/layouts/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 16 Nov 2023 12:13:51 GMT -->
</html>
